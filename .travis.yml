sudo: required
language: php

php:
  - '7.4'

matrix:
  fast_finish: true
  include:
    php: 5.4
    env: WP_TRAVISCI=travis:phpunit
  # allow_failures:
  #   - php: 7.4
  #   - env: WP_VERSION=7.4

services:
  - mysql

cache:
  apt: true
  directories:
    - vendor
    - $HOME/.composer/cache/files

addons:
  apt:
    packages:
      # required by WordPress
      - libjpeg-dev
      - libpng12-dev
      - php5-fpm
      - php5-mysql
      - nginx
  hosts:
    - wp.localhost
    - test1.wp.localhost
    - test2.wp.localhost

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN  # Set in the settings page of your repository, as a secure variable
  keep_history: true
  on:
    branch: main

